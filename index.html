<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Perfume Lab Pro - MÃ©dÃ©a</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Cairo:wght@400;700&family=Monsieur+La+Doulaise&display=swap" rel="stylesheet">
    <style>
        :root{--gold:#d4af37;--bg:#000;--card:#111;--input:#1a1a1a;--green:#27ae60;}
        body{font-family:'Cairo',sans-serif;background:var(--bg);color:#fff;margin:0;padding-bottom:170px;direction:rtl;}
        .header{text-align:center;padding:25px;border-bottom:1px solid #222;}
        .header h1{font-family:'Amiri',serif;color:var(--gold);font-size:28px;margin:0;}
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… */
        .progress-container { position: sticky; top: 0; z-index: 1001; background: rgba(0,0,0,0.95); padding: 10px 15px; border-bottom: 1px solid #222; }
        .progress-bg { background: #222; height: 6px; border-radius: 10px; }
        .progress-fill { background: var(--gold); height: 100%; width: 0%; transition: 0.4s; box-shadow: 0 0 10px var(--gold); }
        .progress-text { font-size: 11px; color: var(--gold); margin-top: 5px; text-align: center; }

        .container{padding:15px;max-width:600px;margin:auto;}
        .card{background:var(--card);border-radius:20px;padding:22px;margin-bottom:20px;border:1px solid #222;}
        .section-title{color:var(--gold);font-size:16px;font-weight:700;margin-bottom:15px;border-right:4px solid var(--gold);padding-right:12px;}
        .question-label {display: block; font-size: 14px; color: #fff; margin-bottom: 12px; font-weight: bold;}
        .options-grid {display: flex; flex-wrap: wrap; gap: 8px;}
        .option-box {flex: 1; min-width: 100px; background: var(--input); border: 1px solid #333; padding: 12px 8px; border-radius: 10px; text-align: center; font-size: 11px; cursor: pointer; transition: 0.3s; color: #bbb;}
        .option-box.selected {background: rgba(212, 175, 55, 0.15); border-color: var(--gold); color: var(--gold); font-weight: bold;}
        .option-box.promo { border-color: var(--green); color: var(--green); }

        /* Ø­Ù‚Ù„ Ø§Ù„ÙƒØªØ§Ø¨Ø© ÙÙˆÙ‚ Ø§Ù„Ù‚Ø§Ø±ÙˆØ±Ø© Ù…Ø¨Ø§Ø´Ø±Ø© */
        .custom-name-input {
            background: #1a1a1a;
            border: 2px solid var(--gold);
            color: #fff;
            padding: 15px;
            border-radius: 12px;
            width: 100%;
            box-sizing: border-box;
            text-align: center;
            font-size: 16px;
            margin-bottom: 20px;
            font-family: 'Cairo';
        }

        /* Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù‚Ø§Ø±ÙˆØ±Ø© */
        .bottle-preview {
            background: radial-gradient(circle, #222 0%, #000 100%);
            height: 280px; border-radius: 20px; position: relative; margin: 10px 0;
            display: flex; flex-direction: column; align-items: center; justify-content: center; border: 1px solid #333;
        }
        .bottle-shape {
            width: 110px; height: 160px; border: 2px solid rgba(212, 175, 55, 0.4); border-radius: 10px;
            position: relative; background: rgba(255,255,255,0.03); display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .bottle-cap { width: 38px; height: 32px; background: var(--gold); position: absolute; top: -34px; border-radius: 4px; }
        .label-perfume { font-family: 'Amiri', serif; color: var(--gold); font-size: 11px; text-align: center; font-weight: bold; margin-bottom: 10px; }
        .label-owner { font-family: 'Monsieur La Doulaise', cursive; color: #fff; font-size: 22px; text-align: center; width: 100%; word-break: break-all; }

        select, input[type="text"], input[type="tel"] {width:100%; background:var(--input); border:1px solid #333; color:#fff; padding:14px; border-radius:12px; font-family:'Cairo'; box-sizing:border-box; outline:none; margin-bottom:12px;}

        .price-bar{position:fixed;bottom:0;left:0;right:0;background:rgba(10,10,10,.98);backdrop-filter:blur(15px);padding:20px;border-top:1px solid var(--gold);display:flex;justify-content:space-between;align-items:center;z-index:1000;}
        .total-price{font-size:24px;font-weight:700;color:var(--gold);}
        .ship-info { font-size: 10px; color: #888; }
        .btn-order{background:var(--gold);color:#000;border:none;padding:15px 40px;border-radius:12px;font-weight:700;cursor:pointer;}
    </style>
</head>
<body>

<div class="header">
    <h1>PERFUME LAB PRO</h1>
    <p style="color:#666;font-size:11px;">Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ø±ÙˆØ§Ø¦Ø­ Ø§Ù„Ø´Ø®ØµÙŠØ© - MÃ©dÃ©a</p>
</div>

<div class="progress-container">
    <div class="progress-bg"><div class="progress-fill" id="p-bar"></div></div>
    <div class="progress-text" id="p-text">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø´Ø®ØµÙŠØ©: 0/16</div>
</div>

<div class="container">
    <div class="card">
        <div class="section-title">ğŸ”¬ Ù…ÙŠØ«Ø§Ù‚ Ø§Ù„ØªØ­Ù„ÙŠÙ„ (16 Ø³Ø¤Ø§Ù„Ø§Ù‹)</div>
        <div id="questions-container"></div>
    </div>

    <div class="card">
        <div class="section-title">ğŸ“¦ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ø±Ø¶ ÙˆØ§Ù„Ø­Ø¬Ù…</div>
        <div class="options-grid" id="size-options">
            <div class="option-box selected" onclick="selectSize(this, 500)">30ml (500 DA)</div>
            <div class="option-box" onclick="selectSize(this, 700)">50ml (700 DA)</div>
            <div class="option-box" onclick="selectSize(this, 1000)">100ml (1000 DA)</div>
            <div class="option-box promo" onclick="selectSize(this, 2500)">ğŸ’¥ Pack x3 (2500 DA)</div>
        </div>
    </div>

    <div class="card">
        <div class="section-title">âœ¨ ØªØ®ØµÙŠØµ Ø§Ù„Ù‚Ø§Ø±ÙˆØ±Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</div>
        
        <label class="question-label">Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø°ÙŠ Ø³ÙŠØ¸Ù‡Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø¬Ø§Ø¬Ø©:</label>
        <input type="text" class="custom-name-input" id="ownerName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§..." oninput="updateBottleName(this.value)">

        <div class="bottle-preview">
            <div class="bottle-shape">
                <div class="bottle-cap"></div>
                <div class="label-perfume" id="view-perfume">Ø§Ù„Ø¹Ø·Ø± Ø§Ù„Ù…Ø®ØªØ§Ø±</div>
                <div class="label-owner" id="view-name">Signature</div>
            </div>
            <p style="font-size: 9px; color: #555; margin-top: 10px;">Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø­ÙŠ</p>
        </div>
    </div>

    <div class="card">
        <div class="section-title">ğŸ“ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø­Ù† ÙˆØ§Ù„ØªÙˆØµÙŠÙ„</div>
        <select id="wilaya" onchange="updateShipping()">
            <option value="">-- Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ„Ø§ÙŠØ© --</option>
        </select>
        <input type="text" id="commune" placeholder="Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©">
        <input type="tel" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
    </div>
</div>

<div class="price-bar">
    <div>
        <span class="ship-info">Ø§Ù„ØªÙˆØµÙŠÙ„: <span id="shipDisplay">0</span> DA</span>
        <div class="total-price"><span id="totalDisplay">500</span> DA</div>
    </div>
    <button class="btn-order" onclick="sendWA()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ ğŸ“©</button>
</div>

<script>
const wilayas = [
    {n: "01- Adrar", p: 1000}, {n: "02- Chlef", p: 700}, {n: "03- Laghouat", p: 700}, {n: "04- Oum El Bouaghi", p: 700}, 
    {n: "05- Batna", p: 700}, {n: "06- Bejaia", p: 700}, {n: "07- Biskra", p: 800}, {n: "08- Bechar", p: 1000}, 
    {n: "09- Blida", p: 500}, {n: "10- Bouira", p: 500}, {n: "11- Tamanghasset", p: 1000}, {n: "12- Tebessa", p: 700}, 
    {n: "13- Tlemcen", p: 700}, {n: "14- Tiaret", p: 700}, {n: "15- Tizi Ouzou", p: 500}, {n: "16- Alger", p: 500}, 
    {n: "17- Djelfa", p: 500}, {n: "18- Jijel", p: 700}, {n: "19- Setif", p: 700}, {n: "20- Saida", p: 700}, 
    {n: "21- Skikda", p: 700}, {n: "22- Sidi Bel Abbes", p: 700}, {n: "23- Annaba", p: 700}, {n: "24- Guelma", p: 700}, 
    {n: "25- Constantine", p: 700}, {n: "26- Medea", p: 200}, {n: "27- Mostaganem", p: 700}, {n: "28- M'Sila", p: 500}, 
    {n: "29- Mascara", p: 700}, {n: "30- Ouargla", p: 800}, {n: "31- Oran", p: 700}, {n: "32- El Bayadh", p: 800}, 
    {n: "33- Illizi", p: 1000}, {n: "34- B.B.Arreridj", p: 700}, {n: "35- Boumerdes", p: 500}, {n: "36- El Tarf", p: 700}, 
    {n: "37- Tindouf", p: 1000}, {n: "38- Tissemsilt", p: 700}, {n: "39- El Oued", p: 800}, {n: "40- Khenchela", p: 700}, 
    {n: "41- Souk Ahras", p: 700}, {n: "42- Tipaza", p: 500}, {n: "43- Mila", p: 700}, {n: "44- Ain Defla", p: 500}, 
    {n: "45- Naama", p: 800}, {n: "46- Ain Temouchent", p: 700}, {n: "47- Ghardaia", p: 800}, {n: "48- Relizane", p: 700},
    {n: "49- Timimoun", p: 1000}, {n: "50- B.B.Mokhtar", p: 1000}, {n: "51- Ouled Djellal", p: 800}, {n: "52- Beni Abbes", p: 1000},
    {n: "53- In Salah", p: 1000}, {n: "54- In Guezzam", p: 1000}, {n: "55- Touggourt", p: 800}, {n: "56- Djanet", p: 1000},
    {n: "57- El M'Ghair", p: 800}, {n: "58- El Meniaa", p: 1000}
];

const questionsData = [
    {id: 1, q: "Ù„Ù…Ù† Ø§Ù„Ø¹Ø·Ø±ØŸ", ops: ["Ø±Ø¬Ù„", "Ø³ÙŠØ¯Ø©", "Ù„Ù„Ø¬Ù†Ø³ÙŠÙ†"]},
    {id: 2, q: "Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø´Ø®ØµÙŠØ©", ops: ["ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ", "Ø¹ØµØ±ÙŠ", "ØºØ§Ù…Ø¶", "Ø±ÙŠØ§Ø¶ÙŠ"]},
    {id: 3, q: "ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…", ops: ["ØµØ¨Ø§Ø­ÙŠ", "Ù…Ø³Ø§Ø¦ÙŠ", "ÙŠÙˆÙ…ÙŠ"]},
    {id: 4, q: "Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø¹Ø·Ø±ÙŠØ©", ops: ["ÙØ±Ù†Ø³ÙŠØ©", "Ù†ÙŠØ´ ÙØ®Ù…", "Ø³ÙƒØ±ÙŠ", "Ø´Ø±Ù‚ÙŠ"]},
    {id: 5, q: "Ø§Ù„Ø­Ø¶ÙˆØ±", ops: ["ÙÙˆØ§Ø­ Ø¬Ø¯Ø§Ù‹", "Ù‡Ø§Ø¯Ø¦", "Ù…ØªØ²Ù†"]},
    {id: 6, q: "Ø§Ù„ØªÙˆÙ„ÙŠÙØ©", ops: ["Ø£Ø®Ø´Ø§Ø¨", "Ø²Ù‡ÙˆØ±", "ÙÙˆØ§ÙƒÙ‡", "ØªÙˆØ§Ø¨Ù„"]},
    {id: 7, q: "Ø§Ù„ÙØµÙ„", ops: ["Ø´ØªØ§Ø¡", "ØµÙŠÙ", "Ø®Ø±ÙŠÙ", "Ø±Ø¨ÙŠØ¹"]},
    {id: 8, q: "Ø§Ù„Ù…ÙƒØ§Ù†", ops: ["Ø§Ù„Ø¹Ù…Ù„", "Ù„Ù‚Ø§Ø¡", "Ø­ÙÙ„Ø©"]},
    {id: 9, q: "Ù†ÙˆØªØ© Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©", ops: ["Ù…Ø³Ùƒ", "Ø¹Ù†Ø¨Ø±", "Ø¹ÙˆØ¯", "ÙØ§Ù†ÙŠÙ„ÙŠØ§"]},
    {id: 10, q: "Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ù…ÙØ¶Ù„", ops: ["Ø£Ø³ÙˆØ¯", "Ø£Ø¨ÙŠØ¶", "Ø£Ø²Ø±Ù‚", "Ø£Ø­Ù…Ø±"]},
    {id: 11, q: "Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø´Ø±Ø©", ops: ["Ø¬Ø§ÙØ©", "Ø¯Ù‡Ù†ÙŠØ©", "Ù…Ø®ØªÙ„Ø·Ø©"]},
    {id: 12, q: "Ø±Ø§Ø¦Ø­Ø© Ù†Ø¸Ø§ÙØ©ØŸ", ops: ["Ù†Ø¹Ù…", "Ù„Ø§"]},
    {id: 13, q: "Ø§Ù„Ø¹Ù…Ø±", ops: ["Ø´Ø¨Ø§Ø¨ÙŠ", "Ù†Ø§Ø¶Ø¬"]},
    {id: 14, q: "Ø­Ù…Ø¶ÙŠØ§ØªØŸ", ops: ["Ù†Ø¹Ù…", "Ù„Ø§"]},
    {id: 15, q: "Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©", ops: ["Ø§Ù„ÙÙˆØ­Ø§Ù†", "Ø§Ù„Ø«Ø¨Ø§Øª"]},
    {id: 16, q: "Ù…Ø³ØªÙˆØ­Ù‰ØŸ", ops: ["Ù†Ø¹Ù…", "Ù„Ø§"]}
];

const logic = { "Ø±Ø¬Ù„-ÙØ±Ù†Ø³ÙŠØ©": "Sauvage Dior", "Ø±Ø¬Ù„-Ù†ÙŠØ´ ÙØ®Ù…": "Creed Aventus", "Ø³ÙŠØ¯Ø©-ÙØ±Ù†Ø³ÙŠØ©": "Miss Dior", "Default": "Lab Special" };
let selectedAnswers = {};
let currentPrice = 500;
let ship = 0;

const selectWilaya = document.getElementById('wilaya');
wilayas.forEach((w, index) => { let opt = document.createElement('option'); opt.value = index; opt.innerHTML = w.n; selectWilaya.appendChild(opt); });

const qContainer = document.getElementById('questions-container');
questionsData.forEach(item => {
    let html = `<div class="question-block"><span class="question-label">${item.id}- ${item.q}</span><div class="options-grid">`;
    item.ops.forEach(opt => { html += `<div class="option-box" onclick="selectOption(${item.id}, '${opt}', this)">${opt}</div>`; });
    qContainer.innerHTML += html + `</div></div>`;
});

function updateBottleName(val) { document.getElementById('view-name').innerText = val || "Signature"; }

function selectOption(id, val, el) {
    el.parentElement.querySelectorAll('.option-box').forEach(b => b.classList.remove('selected'));
    el.classList.add('selected');
    selectedAnswers[id] = val;
    let count = Object.keys(selectedAnswers).length;
    document.getElementById('p-bar').style.width = (count/16*100) + "%";
    document.getElementById('p-text').innerText = `ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø´Ø®ØµÙŠØ©: ${count}/16`;

    if(selectedAnswers[1] && selectedAnswers[4]) {
        const key = `${selectedAnswers[1]}-${selectedAnswers[4]}`;
        document.getElementById('view-perfume').innerText = logic[key] || logic["Default"];
    }
}

function selectSize(el, pr) {
    document.querySelectorAll('#size-options .option-box').forEach(b => b.classList.remove('selected'));
    el.classList.add('selected');
    currentPrice = pr;
    updateTotal();
}

function updateShipping() {
    const idx = document.getElementById('wilaya').value;
    if(idx !== "") {
        ship = wilayas[idx].p;
        document.getElementById('shipDisplay').innerText = ship;
    }
    updateTotal();
}

function updateTotal() { document.getElementById('totalDisplay').innerText = currentPrice + ship; }

function sendWA() {
    const pName = document.getElementById('view-perfume').innerText;
    const oName = document.getElementById('ownerName').value;
    const wIdx = document.getElementById('wilaya').value;
    const ph = document.getElementById('phone').value;
    if(!wIdx || !ph || !oName || pName === "Ø§Ù„Ø¹Ø·Ø± Ø§Ù„Ù…Ø®ØªØ§Ø±") { alert("ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ ÙƒØ§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"); return; }

    let msg = `*ğŸ”¬ Ø·Ù„Ø¨ ØªØµÙ…ÙŠÙ… Ø¹Ø·Ø± Ù…Ø®ØµØµ*\n` +
              `âœ¨ *Ø§Ù„Ø¹Ø·Ø± Ø§Ù„Ù†Ø§ØªØ¬:* ${pName}\n` +
              `ğŸ‘¤ *Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¨ÙˆØ¹:* ${oName}\n` +
              `ğŸ“¦ *Ø§Ù„Ø­Ø¬Ù…:* ${document.querySelector('#size-options .selected').innerText}\n` +
              `ğŸ“ *Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:* ${wilayas[wIdx].n} - ${document.getElementById('commune').value}\n` +
              `ğŸ“ *Ø§Ù„Ù‡Ø§ØªÙ:* ${ph}\n` +
              `ğŸ’° *Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:* ${document.getElementById('totalDisplay').innerText} DA`;

    window.location.href = `https://wa.me/213783147002?text=${encodeURIComponent(msg)}`;
}
</script>
</body>
</html>
