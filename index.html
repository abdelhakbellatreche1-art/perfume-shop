<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESSENCE D'ORIENT | تجربة تصميم العطر الملكية</title>
    <style>
        :root { --gold: #c5a059; --dark: #000000; --bg: #ffffff; }
        body { font-family: 'Times New Roman', serif; background-color: var(--bg); margin: 0; color: #1a1a1a; text-align: center; line-height: 1.6; }
        
        .brand-logo { padding: 40px 20px; background: var(--dark); color: var(--gold); border-bottom: 3px solid var(--gold); }
        .brand-logo h1 { margin: 0; font-size: 2.2em; letter-spacing: 5px; font-weight: bold; }
        
        .price-float { position: fixed; bottom: 20px; left: 20px; background: var(--gold); color: #000; padding: 15px 25px; border-radius: 50px; font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 100; font-size: 1.2em; border: 2px solid #000; }

        .quiz-container { max-width: 600px; margin: 20px auto; padding: 20px; padding-bottom: 120px; }
        .progress-bar { width: 100%; height: 2px; background: #eee; margin-bottom: 30px; }
        .progress-fill { height: 100%; background: var(--gold); width: 0%; transition: 0.5s; }

        .step { display: none; }
        .step.active { display: block; animation: fadeIn 0.4s ease; }
        h2 { font-size: 1.3em; margin-bottom: 30px; border-bottom: 1px solid var(--gold); padding-bottom: 10px; display: inline-block; }

        .options-list { display: flex; flex-direction: column; gap: 10px; }
        .opt-btn { padding: 16px; border: 1px solid #333; background: #fff; cursor: pointer; font-size: 1em; transition: 0.3s; font-weight: bold; }
        .opt-btn:hover { background: var(--dark); color: var(--gold); }

        .bottle-card { width: 100%; border: 1px solid #eee; padding: 20px; cursor: pointer; margin-bottom: 15px; }
        .bottle-card img { max-width: 100px; height: auto; }

        .input-field, select { width: 100%; padding: 15px; border: 2px solid var(--dark); font-size: 1.1em; margin-bottom: 15px; text-align: center; }

        #result-area { display: none; padding: 40px; background: #000; color: #fff; }
        .wa-btn { background: var(--gold); color: #000; text-decoration: none; padding: 20px 50px; display: inline-block; font-weight: bold; font-size: 1.2em; margin-top: 20px; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div class="price-float" id="live-price">الإجمالي: 0 دج</div>

    <div class="brand-logo">
        <h1>E S S E N C E</h1>
        <p>D' O R I E N T</p>
    </div>

    <div class="quiz-container">
        <div class="progress-bar"><div class="progress-fill" id="p-fill"></div></div>

        <div class="step active" id="s1">
            <h2>1. العطر مخصص لـ:</h2>
            <div class="options-list">
                <button class="opt-btn" onclick="saveQ('الجنس', 'رجل', 1)">رجل</button>
                <button class="opt-btn" onclick="saveQ('الجنس', 'امرأة', 1)">امرأة</button>
                <button class="opt-btn" onclick="saveQ('الجنس', 'هدية (للجنسين)', 1)">هدية لشخص آخر</button>
            </div>
        </div>

        <div class="step" id="s2">
            <h2>2. ما هو نمط ملابسك الغالب؟</h2>
            <div class="options-list">
                <button class="opt-btn" onclick="saveQ('الستايل', 'رسمي (بدلات/كلاسيك)', 2)">رسمي (بدلات / كلاسيك)</button>
                <button class="opt-btn" onclick="saveQ('الستايل', 'كاجوال (يومي مريح)', 2)">كاجوال (يومي مريح)</button>
                <button class="opt-btn" onclick="saveQ('الستايل', 'رياضي', 2)">رياضي</button>
            </div>
        </div>

        <div class="step" id="s3">
            <h2>3. ما هو الوقت المفضل لبروز عطرك؟</h2>
            <div class="options-list">
                <button class="opt-btn" onclick="saveQ('الوقت', 'الصباح الباكر والعمل', 3)">الصباح والعمل</button>
                <button class="opt-btn" onclick="saveQ('الوقت', 'المساء والسهرات', 3)">المساء والسهرات</button>
                <button class="opt-btn" onclick="saveQ('الوقت', 'طوال اليوم', 3)">طوال اليوم</button>
            </div>
        </div>

        <div class="step" id="s4">
            <h2>4. أي الروائح تجذبك أكثر؟</h2>
            <div class="options-list">
                <button class="opt-btn" onclick="saveQ('الرائحة', 'الخشب والعود', 4)">الأخشاب والعود</button>
                <button class="opt-btn" onclick="saveQ('الرائحة', 'الحمضيات والنظافة', 4)">الحمضيات والنظافة</button>
                <button class="opt-btn" onclick="saveQ('الرائحة', 'الفواكه والحلويات', 4)">الفواكه والسكريات</button>
                <button class="opt-btn" onclick="saveQ('الرائحة', 'الأزهار الناعمة', 4)">الأزهار الناعمة</button>
            </div>
        </div>

        <div class="step" id="s5">
            <h2>5. هل تحب العطور التي تترك أثراً خلفك (فوحان)؟</h2>
            <div class="options-list">
                <button class="opt-btn" onclick="saveQ('الفوحان', 'نعم، أحب أن يلاحظ الجميع عطري', 5)">نعم، فوحان قوي جداً</button>
                <button class="opt-btn" onclick="saveQ('الفوحان', 'أفضل العطور الهادئة القريبة من الجسم', 5)">أفضل الهدوء والخصوصية</button>
            </div>
        </div>

        <div class="step" id="s6">
            <h2>6. ما هو فصلك المفضل؟</h2>
            <div class="options-list">
                <button class="opt-btn" onclick="saveQ('الفصل', 'الشتاء (روائح دافئة)', 6)">الشتاء (روائح دافئة)</button>
                <button class="opt-btn" onclick="saveQ('الفصل', 'الصيف (روائح منعشة)', 6)">الصيف (روائح منعشة)</button>
            </div>
        </div>

        <div class="step" id="s7">
            <h2>7. في المناسبات، أنت شخص:</h2>
            <div class="options-list">
                <button class="opt-btn" onclick="saveQ('الشخصية', 'خجول وهادئ', 7)">خجول وهادئ</button>
                <button class="opt-btn" onclick="saveQ('الشخصية', 'اجتماعي وملفت للأنظار', 7)">اجتماعي وملفت للأنظار</button>
            </div>
        </div>

        <div class="step" id="s8">
            <h2>8. هل تعاني من حساسية تجاه العطور القوية؟</h2>
            <div class="options-list">
                <button class="opt-btn" onclick="saveQ('الحساسية', 'لا، أحب العطور القوية', 8)">لا، أحب العطور القوية</button>
                <button class="opt-btn" onclick="saveQ('الحساسية', 'نعم، أفضل الروائح الخفيفة', 8)">نعم، أفضل الروائح الخفيفة</button>
            </div>
        </div>

        <div class="step" id="s9">
            <h2>9. ما هو انطباعك المفضل الذي تريد تركه؟</h2>
            <div class="options-list">
                <button class="opt-btn" onclick="saveQ('الانطباع', 'انطباع الثراء والفخامة', 9)">الفخامة والهيبة</button>
                <button class="opt-btn" onclick="saveQ('الانطباع', 'انطباع الحيوية والشباب', 9)">الحيوية والشباب</button>
                <button class="opt-btn" onclick="saveQ('الانطباع', 'انطباع النظافة والترتيب', 9)">النظافة والترتيب</button>
            </div>
        </div>

        <div class="step" id="s10">
            <h2>10. هل تفضل العطور الشرقية أم الفرنسية؟</h2>
            <div class="options-list">
                <button class="opt-btn" onclick="saveQ('الذوق', 'شرقية أصيلة', 10)">شرقية أصيلة</button>
                <button class="opt-btn" onclick="saveQ('الذوق', 'فرنسية عصرية', 10)">فرنسية عصرية</button>
                <button class="opt-btn" onclick="saveQ('الذوق', 'مزيج بين الاثنين', 10)">مزيج بين الاثنين</button>
            </div>
        </div>

        <div class="step" id="s11">
            <h2>11. اختر حجم القارورة:</h2>
            <div class="options-list">
                <div class="bottle-card" onclick="setBottle('6 مل', 200, 11)">
                    <img src="https://images.unsplash.com/photo-1583209814683-c023dd2f3667?w=200">
                    <p>6 ML - تولة (200 دج)</p>
                </div>
                <div class="bottle-card" onclick="setBottle('50 مل', 950, 11)">
                    <img src="https://images.unsplash.com/photo-1594035910387-fea47794261f?w=200">
                    <p>50 ML - ميلانو (950 دج)</p>
                </div>
                <div class="bottle-card" onclick="setBottle('100 مل', 1500, 11)">
                    <img src="https://images.unsplash.com/photo-1544161515-4af6b1d8e179?w=200">
                    <p>100 ML - ملكية (1500 دج)</p>
                </div>
            </div>
        </div>

        <div class="step" id="s12">
            <h2>12. نسبة التركيز (لادوز):</h2>
            <div class="options-list">
                <button class="opt-btn" onclick="setDose('25% قياسي', 0, 12)">25% (0 دج إضافي)</button>
                <button class="opt-btn" onclick="setDose('50% شارجي', 300, 12)">50% (+300 دج)</button>
                <button class="opt-btn" onclick="setDose('100% زيت خام', 600, 12)">100% (+600 دج)</button>
            </div>
        </div>

        <div class="step" id="s13">
            <h2>13. تخصيص الطباعة (+150 دج):</h2>
            <div class="options-list">
                <button class="opt-btn" onclick="showInput()">أريد كتابة نص (+150 دج)</button>
                <button class="opt-btn" onclick="savePrint('بدون طباعة', 0, 13)">بدون طباعة (0 دج)</button>
            </div>
            <div id="custom-input" style="display:none; margin-top:20px;">
                <input type="text" id="finalText" class="input-field" placeholder="اكتب الاسم هنا...">
                <button class="opt-btn" style="width:100%; background:var(--gold);" onclick="saveCustomText()">تأكيد النص</button>
            </div>
        </div>

        <div class="step" id="s14">
            <h2>14. الشحن والعنوان:</h2>
            <select id="wilaya" onchange="setShipping(this)">
                <option value="0" data-price="0">-- اختر الولاية --</option>
            </select>
            <input type="text" id="exactAddress" class="input-field" placeholder="العنوان الدقيق (البلدية والحي)">
            <button class="opt-btn" style="width:100%; background:var(--gold);" onclick="showFinal()">إتمام الطلب</button>
        </div>

        <div id="result-area">
            <h1>تم تحليل الشخصية بنجاح</h1>
            <p id="summary-details" style="text-align: right; font-size: 0.8em; border: 1px solid #333; padding: 10px; line-height: 1.4;"></p>
            <h2 id="summary-price" style="color: var(--gold);"></h2>
            <a href="#" id="wa-link" class="wa-btn">إرسال التحليل والطلب</a>
        </div>
    </div>

    <script>
        let order = { shipping: 0, bottle: 0, dose: 0, print: 0 };
        let profile = {};
        let details = { bottleSize: "", doseLevel: "", printText: "بدون", wilaya: "", address: "" };
        const totalSteps = 14;

        const wilayas = ["أدرار (800)","الشلف (400)","الأغواط (500)","أم البواقي (450)","باتنة (450)","بجاية (450)","بسكرة (500)","بشار (700)","البليدة (350)","البويرة (400)","تمنراست (800)","تبسة (500)","تلمسان (500)","تيارت (450)","تيزي وزو (400)","الجزائر العاصمة (350)","الجلفة (450)","جيجل (450)","سطيف (450)","سعيدة (500)","سكيكدة (450)","سيدي بلعباس (500)","عنابة (450)","قالمة (450)","قسنطينة (450)","المدية (300)","مستغانم (450)","المسيلة (450)","معسكر (450)","ورقلة (600)","وهران (500)","البيض (600)","إليزي (800)","برج بوعريريج (450)","بومرداس (350)","الطارف (500)","تندوف (800)","تيسمسيلت (450)","الوادي (600)","خنشلة (500)","سوق أهراس (500)","تيبازة (400)","ميلة (450)","عين الدفلى (400)","النعامة (600)","عين تموشنت (500)","غرداية (600)","غليزان (450)","تيميمون (800)","برج باجي مختار (800)","أولاد جلال (600)","بني عباس (800)","إن صالح (800)","إن قزام (800)","تقرت (700)","جانت (800)","المغير (700)","المنيعة (700)"];
        
        const sel = document.getElementById('wilaya');
        wilayas.forEach(w => {
            let n = w.split(' (')[0], p = w.split('(')[1].replace(')', '');
            let o = document.createElement('option'); o.value = n; o.setAttribute('data-price', p); o.innerText = n + ` (${p} دج)`;
            sel.appendChild(o);
        });

        function updatePrice() {
            let t = order.shipping + order.bottle + order.dose + order.print;
            document.getElementById('live-price').innerText = `الإجمالي: ${t} دج`;
            return t;
        }

        function saveQ(q, a, curr) { profile[q] = a; next(curr); }

        function setBottle(s, p, curr) { details.bottleSize = s; order.bottle = p; updatePrice(); next(curr); }

        function setDose(l, e, curr) { details.doseLevel = l; order.dose = e; updatePrice(); next(curr); }

        function showInput() { document.getElementById('custom-input').style.display='block'; document.querySelector('#s13 .options-list').style.display='none'; }

        function saveCustomText() { 
            let t = document.getElementById('finalText').value;
            if(!t) return alert("اكتب النص");
            details.printText = t; order.print = 150; updatePrice(); next(13); 
        }

        function savePrint(t, p, curr) { details.printText = t; order.print = p; updatePrice(); next(curr); }

        function setShipping(el) {
            let s = el.options[el.selectedIndex];
            order.shipping = parseInt(s.getAttribute('data-price')) || 0;
            details.wilaya = s.value;
            updatePrice();
        }

        function next(c) {
            document.getElementById('s'+c).classList.remove('active');
            document.getElementById('p-fill').style.width = (c/totalSteps*100)+'%';
            document.getElementById('s'+(c+1)).classList.add('active');
        }

        function showFinal() {
            details.address = document.getElementById('exactAddress').value;
            if(details.wilaya === "0" || !details.address) return alert("اكمل بيانات الشحن");
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            document.getElementById('result-area').style.display = 'block';
            let total = updatePrice();
            document.getElementById('summary-price').innerText = `الإجمالي النهائي: ${total} دج`;
            
            let profStr = ""; for(let x in profile) profStr += `${x}: ${profile[x]}<br>`;
            document.getElementById('summary-details').innerHTML = `<b>ملف الشخصية:</b><br>${profStr}<hr><b>الطلب:</b><br>الحجم: ${details.bottleSize}<br>لادوز: ${details.doseLevel}<br>الولاية: ${details.wilaya}`;

            let msg = `طلب تصميم عطر احترافي%0A`;
            msg += `--- تحليل الشخصية ---%0A`;
            for(let x in profile) msg += `${x}: ${profile[x]}%0A`;
            msg += `--- تفاصيل المنتج ---%0A`;
            msg += `الحجم: ${details.bottleSize}%0Aلادوز: ${details.doseLevel}%0Aالطباعة: ${details.printText}%0A`;
            msg += `--- الشحن ---%0A`;
            msg += `الولاية: ${details.wilaya}%0Aالعنوان: ${details.address}%0A`;
            msg += `--------------------%0Aالسعر الإجمالي: ${total} دج`;
            document.getElementById('wa-link').href = `https://wa.me/213783147002?text=${msg}`;
        }
    </script>
</body>
</html>
