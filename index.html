<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESSENCE D'ORIENT | التصميم الشخصي</title>
    <style>
        :root { --gold: #c5a059; --dark: #111; --light: #f4f4f4; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #fff; margin: 0; color: var(--dark); overflow-x: hidden; }
        
        /* الهوية البصرية */
        .brand-header { background: var(--dark); color: var(--gold); padding: 20px; text-align: center; border-bottom: 4px solid var(--gold); }
        .brand-header h1 { margin: 0; font-size: 1.8em; letter-spacing: 2px; }

        /* السعر العائم */
        .price-tag { position: fixed; bottom: 20px; left: 20px; background: var(--gold); color: #000; padding: 12px 25px; border-radius: 50px; font-weight: bold; box-shadow: 0 5px 15px rgba(0,0,0,0.2); z-index: 999; border: 2px solid #000; font-size: 1.1em; }

        .container { max-width: 450px; margin: 20px auto; padding: 15px; }
        
        /* شريط التقدم */
        .progress-container { width: 100%; height: 6px; background: #eee; border-radius: 10px; margin-bottom: 30px; }
        .progress-bar { height: 100%; background: var(--gold); width: 0%; border-radius: 10px; transition: 0.5s; }

        .step { display: none; text-align: right; }
        .step.active { display: block; animation: slideIn 0.3s ease-out; }

        h2 { font-size: 1.2em; color: var(--dark); margin-bottom: 20px; padding-right: 10px; border-right: 5px solid var(--gold); }

        /* الأزرار والخيارات */
        .options-column { display: flex; flex-direction: column; gap: 12px; }
        .btn-opt { background: #fff; border: 1px solid #ddd; padding: 16px; border-radius: 10px; cursor: pointer; text-align: right; font-size: 1em; font-weight: 600; transition: 0.2s; }
        .btn-opt:hover { border-color: var(--gold); background: #fffdf9; }

        /* كروت القوارير */
        .bottle-card { display: flex; align-items: center; background: #fff; border: 2px solid #eee; border-radius: 15px; padding: 12px; cursor: pointer; transition: 0.3s; margin-bottom: 12px; }
        .bottle-card:hover { border-color: var(--gold); transform: translateY(-2px); }
        .bottle-card img { width: 60px; height: 75px; object-fit: contain; margin-left: 15px; }
        .bottle-card div h3 { margin: 0; font-size: 1.1em; }
        .bottle-card div p { margin: 5px 0 0; color: #d35400; font-weight: bold; }

        .input-box, select { width: 100%; padding: 15px; border: 1px solid #ccc; border-radius: 10px; font-size: 1em; margin-bottom: 15px; box-sizing: border-box; outline: none; }
        .input-box:focus { border-color: var(--gold); }

        /* النتيجة النهائية */
        #final-screen { display: none; background: #fdfdfd; padding: 25px; border-radius: 20px; border: 1px solid var(--gold); }
        .cod-badge { background: #e7f3ff; color: #0056b3; padding: 5px 15px; border-radius: 5px; font-size: 0.8em; font-weight: bold; display: inline-block; margin-bottom: 15px; }
        .wa-send-btn { background: #25D366; color: #fff; text-decoration: none; padding: 18px; display: block; border-radius: 12px; font-weight: bold; font-size: 1.1em; margin-top: 20px; text-align: center; box-shadow: 0 4px 10px rgba(37, 211, 102, 0.3); }

        @keyframes slideIn { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
    </style>
</head>
<body>

    <div class="price-tag" id="floating-price">0 دج</div>

    <div class="brand-header">
        <h1>ESSENCE D'ORIENT</h1>
    </div>

    <div class="container">
        <div class="progress-container"><div class="progress-bar" id="progress"></div></div>

        <div class="step active" id="s1"><h2>الجنس:</h2><div class="options-column"><button class="btn-opt" onclick="save('الجنس','رجالي',1)">رجالي</button><button class="btn-opt" onclick="save('الجنس','نسائي',1)">نسائي</button><button class="btn-opt" onclick="save('الجنس','للجنسين',1)">للجنسين</button></div></div>
        <div class="step" id="s2"><h2>اللون المفضل:</h2><div class="options-column"><button class="btn-opt" onclick="save('اللون','أسود',2)">أسود</button><button class="btn-opt" onclick="save('اللون','أزرق',2)">أزرق</button><button class="btn-opt" onclick="save('اللون','أبيض',2)">أبيض</button></div></div>
        <div class="step" id="s3"><h2>وقت الاستخدام:</h2><div class="options-column"><button class="btn-opt" onclick="save('الوقت','صيفي منعش',3)">صيفي منعش</button><button class="btn-opt" onclick="save('الوقت','شتوي دافئ',3)">شتوي دافئ</button></div></div>
        <div class="step" id="s4"><h2>مكان الرش:</h2><div class="options-column"><button class="btn-opt" onclick="save('مكان الرش','على الجلد',4)">على الجلد</button><button class="btn-opt" onclick="save('مكان الرش','على الملابس',4)">على الملابس</button></div></div>
        <div class="step" id="s5"><h2>العمل:</h2><div class="options-column"><button class="btn-opt" onclick="save('العمل','مكتبي',5)">مكتبي</button><button class="btn-opt" onclick="save('العمل','ميداني/حركة',5)">ميداني/حركة</button></div></div>
        <div class="step" id="s6"><h2>الشغف:</h2><div class="options-column"><button class="btn-opt" onclick="save('الشغف','الرياضة',6)">الرياضة</button><button class="btn-opt" onclick="save('الشغف','الأعمال',6)">الأعمال</button><button class="btn-opt" onclick="save('الشغف','الفن',6)">الفن</button></div></div>
        <div class="step" id="s7"><h2>الفوحان:</h2><div class="options-column"><button class="btn-opt" onclick="save('الفوحان','قوي جداً',7)">قوي جداً</button><button class="btn-opt" onclick="save('الفوحان','هادئ',7)">هادئ</button></div></div>

        <div class="step" id="s8">
            <h2>اختر القارورة:</h2>
            <div class="bottle-card" onclick="setBottle('6 ML', 150, 8)"><img src="https://cdn-icons-png.flaticon.com/512/3209/3209144.png"><div><h3>6 ML</h3><p>150 دج</p></div></div>
            <div class="bottle-card" onclick="setBottle('12 ML', 350, 8)"><img src="https://cdn-icons-png.flaticon.com/512/3209/3209083.png"><div><h3>12 ML</h3><p>350 دج</p></div></div>
            <div class="bottle-card" onclick="setBottle('30 ML', 550, 8)"><img src="https://cdn-icons-png.flaticon.com/512/9322/9322524.png"><div><h3>30 ML</h3><p>550 دج</p></div></div>
            <div class="bottle-card" onclick="setBottle('40 ML', 700, 8)"><img src="https://cdn-icons-png.flaticon.com/512/9322/9322524.png"><div><h3>40 ML</h3><p>700 دج</p></div></div>
            <div class="bottle-card" onclick="setBottle('50 ML', 850, 8)"><img src="https://cdn-icons-png.flaticon.com/512/3063/3063822.png"><div><h3>50 ML</h3><p>850 دج</p></div></div>
            <div class="bottle-card" onclick="setBottle('100 ML', 1350, 8)"><img src="https://cdn-icons-png.flaticon.com/512/3063/3063822.png"><div><h3>100 ML</h3><p>1350 دج</p></div></div>
        </div>

        <div class="step" id="s9">
            <h2>التركيز (لادوز):</h2>
            <div class="options-column">
                <button class="btn-opt" onclick="setDose('25%', 0, 9)">25% - قياسي (0 دج)</button>
                <button class="btn-opt" onclick="setDose('50%', 300, 9)">50% - شارجي (+300 دج)</button>
                <button class="btn-opt" onclick="setDose('100%', 600, 9)">100% - زيت خام (+600 دج)</button>
            </div>
        </div>

        <div class="step" id="s10">
            <h2>بيانات الاستلام:</h2>
            <div class="cod-badge">تنبيه: الدفع يتم عند الاستلام (COD)</div>
            <select id="wilaya" onchange="updateShipping(this)">
                <option value="0" data-price="0">-- اختر الولاية (58 ولاية) --</option>
            </select>
            <input type="text" id="address" class="input-box" placeholder="البلدية والحي الدقيق">
            <button class="btn-opt" style="width:100%; background:var(--gold); color:#000;" onclick="finish()">تأكيد الطلب</button>
        </div>

        <div id="final-screen">
            <div class="cod-badge">الطلب جاهز للإرسال</div>
            <p id="order-summary" style="text-align:right; font-size:0.9em; line-height:1.6;"></p>
            <hr>
            <h2 id="total-price" style="text-align:center; border:none; color:#d35400;"></h2>
            <p style="font-size:0.8em; color:#666;">* الدفع نقداً عند استلام الطرد.</p>
            <a href="#" id="wa-btn" class="wa-send-btn">إرسال عبر واتساب</a>
        </div>
    </div>

    <script>
        let data = { ship:0, bottle:0, dose:0 };
        let userProfile = {};
        let finalData = { size:"", doseLvl:"", loc:"", addr:"" };
        const total = 10;

        const wilayas = [
            "01-أدرار (800)","02-الشلف (400)","03-الأغواط (500)","04-أم البواقي (500)","05-باتنة (500)","06-بجاية (450)","07-بسكرة (600)","08-بشار (800)","09-البليدة (350)","10-البويرة (400)","11-تمنراست (1000)","12-تبسة (500)","13-تلمسان (500)","14-تيارت (500)","15-تيزي وزو (400)","16-الجزائر (350)","17-الجلفة (500)","18-جيجل (500)","19-سطيف (450)","20-سعيدة (500)","21-سكيكدة (500)","22-سيدي بلعباس (500)","23-عنابة (500)","24-قالمة (500)","25-قسنطينة (450)","26-المدية (300)","27-مستغانم (500)","28-المسيلة (500)","29-معسكر (500)","30-ورقلة (700)","31-وهران (500)","32-البيض (700)","33-إليزي (1000)","34-برج بوعريريج (450)","35-بومرداس (350)","36-الطارف (550)","37-تندوف (1000)","38-تيسمسيلت (500)","39-الوادي (700)","40-خنشلة (500)","41-سوق أهراس (550)","42-تيبازة (400)","43-ميلة (500)","44-عين الدفلى (400)","45-النعامة (700)","46-عين تموشنت (500)","47-غرداية (700)","48-غليزان (500)","49-تيميمون (900)","50-برج باجي مختار (1200)","51-أولاد جلال (700)","52-بني عباس (900)","53-عين صالح (900)","54-عين قزام (1200)","55-تقرت (700)","56-جانت (1200)","57-المغير (700)","58-المنيعة (800)"
        ];

        const wSelect = document.getElementById('wilaya');
        wilayas.forEach(w => {
            let p = w.split(' (');
            let opt = document.createElement('option');
            opt.value = p[0];
            opt.setAttribute('data-p', p[1].replace(')',''));
            opt.innerText = w + " دج";
            wSelect.appendChild(opt);
        });

        function save(key, val, step) { userProfile[key] = val; next(step); }
        function setBottle(sz, pr, step) { finalData.size = sz; data.bottle = pr; calc(); next(step); }
        function setDose(lvl, pr, step) { finalData.doseLvl = lvl; data.dose = pr; calc(); next(step); }
        function updateShipping(el) {
            let opt = el.options[el.selectedIndex];
            data.ship = parseInt(opt.getAttribute('data-p')) || 0;
            finalData.loc = opt.value;
            calc();
        }
        function calc() {
            let t = data.ship + data.bottle + data.dose;
            document.getElementById('floating-price').innerText = t + " دج";
            return t;
        }
        function next(curr) {
            document.getElementById('s'+curr).classList.remove('active');
            document.getElementById('progress').style.width = (curr/total*100) + '%';
            document.getElementById('s'+(curr+1)).classList.add('active');
        }
        function finish() {
            finalData.addr = document.getElementById('address').value;
            if(finalData.loc === "0" || !finalData.addr) return alert("يرجى إكمال بيانات العنوان");
            
            document.getElementById('s10').classList.remove('active');
            document.getElementById('final-screen').style.display = 'block';
            let totalVal = calc();
            
            document.getElementById('total-price').innerText = "الإجمالي: " + totalVal + " دج";
            let sum = "<b>تفاصيل التصميم:</b><br>";
            for(let k in userProfile) sum += `• ${k}: ${userProfile[k]}<br>`;
            sum += `<hr>الحجم: ${finalData.size} | التركيز: ${finalData.doseLvl}<br>الولاية: ${finalData.loc}<br>طريقة الدفع: الدفع عند الاستلام`;
            document.getElementById('order-summary').innerHTML = sum;

            let msg = `طلب عطر (دفع عند الاستلام)%0A%0A`;
            for(let k in userProfile) msg += `${k}: ${userProfile[k]}%0A`;
            msg += `%0Aالحجم: ${finalData.size}%0Aالتركيز: ${finalData.doseLvl}%0Aالعنوان: ${finalData.loc} - ${finalData.addr}%0Aالإجمالي: ${totalVal} دج`;
            document.getElementById('wa-btn').href = `https://wa.me/213783147002?text=${msg}`;
        }
    </script>
</body>
</html>
